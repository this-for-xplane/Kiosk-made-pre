<script>
const selectedItems = document.getElementById('selected-items');
const tiles = document.querySelectorAll('.tile');
const payButton = document.getElementById('pay-button');
const cardSlot = document.getElementById('card-slot');
const cardInsert = document.getElementById('card-insert');
const receiptInsert = document.getElementById('receipt-insert');
const paymentDisplay = document.getElementById('payment-display');
const welcomeOverlay = document.getElementById('welcome-overlay');
let cardInserted = false;

// ë©”ë‰´ ì„ íƒ
tiles.forEach(tile=>{
  tile.addEventListener('click',()=>{
    if(selectedItems.textContent==="ì„ íƒí•œ ë©”ë‰´ ì—†ìŒ") selectedItems.textContent="";
    const tag = document.createElement('div');
    tag.textContent = tile.textContent;
    tag.style.background="#fff";
    tag.style.padding="3px 8px";
    tag.style.borderRadius="6px";
    tag.style.border="1px solid #ccc";
    tag.style.cursor="pointer";

    // ðŸ”¹ í´ë¦­ ì‹œ ì‚­ì œ
    tag.addEventListener('click', ()=>{
      tag.remove();
      if(selectedItems.children.length === 0) {
        selectedItems.textContent = "ì„ íƒí•œ ë©”ë‰´ ì—†ìŒ";
        payButton.style.display='none';
      }
    });

    selectedItems.appendChild(tag);
    payButton.style.display='inline-block';
  });
});

// ê²°ì œ ë²„íŠ¼ í´ë¦­ â†’ ì¹´ë“œ ì‚½ìž… ì•ˆë‚´
payButton.addEventListener('click',()=>{
  alert("ì¹´ë“œ íˆ¬ìž…êµ¬ë¥¼ í„°ì¹˜í•˜ì„¸ìš”!");
});

// ì¹´ë“œ ìŠ¬ë¡¯ í´ë¦­ ì‹œ ê²°ì œ ì§„í–‰
cardSlot.addEventListener('click',()=>{
  if(selectedItems.textContent==="ì„ íƒí•œ ë©”ë‰´ ì—†ìŒ" || cardInserted) return;
  performPayment();
});

function performPayment(){
  cardInserted = true;
  cardInsert.style.transform = "translateY(-110%)";
  paymentDisplay.textContent = "ê²°ì œ ì¤‘...";
  paymentDisplay.style.opacity = "1";

  setTimeout(()=>{ paymentDisplay.textContent = "ê²°ì œ ì™„ë£Œ!"; },2000);
  setTimeout(()=>{ receiptInsert.classList.add('receipt-active'); },2500);
  setTimeout(()=>{
    paymentDisplay.style.opacity = "0";
    cardInsert.style.transform = "translateY(0)";
    setTimeout(()=>{
      receiptInsert.classList.remove('receipt-active');
      receiptInsert.style.height="0";
      selectedItems.textContent = "ì„ íƒí•œ ë©”ë‰´ ì—†ìŒ";
      payButton.style.display='none';
      cardInserted = false;
    },4000);
  },6000);
}

// QR / ê¸°íƒ€ ë²„íŠ¼
document.getElementById('qr-reader').addEventListener('click',()=>alert("QRì½”ë“œë¥¼ ì¸ì‹í•˜ì„¸ìš”"));
document.getElementById('language-btn').addEventListener('click',()=>alert("ì–¸ì–´ ë³€ê²½"));
document.getElementById('help-btn').addEventListener('click',()=>alert("ë„ì›€ì´ í•„ìš”í•˜ì‹ ê°€ìš”?"));

// í™˜ì˜í™”ë©´ í´ë¦­ì‹œ ì‹œìž‘
welcomeOverlay.addEventListener('click',()=>{ welcomeOverlay.style.display='none'; });
</script>
