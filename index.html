<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Kiosk Simulator</title>
<style>
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  -webkit-user-select: none; /* iOS Safari 텍스트 선택 방지 */
  -ms-user-select: none;     /* Edge */
  user-select: none;         /* 모든 브라우저 공통 */
  -webkit-touch-callout: none; /* 길게 눌러 복사 메뉴 방지 */
}

button, div {
  -webkit-tap-highlight-color: transparent; /* 터치 시 파란 하이라이트 제거 */
}

html, body {
  width: 100%;
  height: 100%;
  background: #f3f3f3;
  font-family: sans-serif;
  overflow: hidden;
}

#welcome-overlay {
  position: fixed;
  width: 100%;
  height: 100%;
  background: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  z-index: 10;
  font-size: 2em;
  cursor: pointer;
}

.kiosk {
  position: relative;
  width: 430px;
  height: 800px;
  background: #fff;
  margin: 20px auto;
  border-radius: 20px;
  box-shadow: 0 0 20px rgba(0,0,0,0.2);
  overflow: hidden;
  transition: transform 0.4s ease;
}

.screen {
  height: 70%;
  background: #f8f8f8;
  padding: 10px;
  overflow-y: auto;
}

.tiles {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.tile {
  width: 30%;
  height: 80px;
  background: #e0e0e0;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 10px;
  cursor: pointer;
  transition: background 0.2s;
}

.tile:hover {
  background: #d0d0d0;
}

.selected {
  border: 2px solid #0078ff;
}

.bottom {
  height: 30%;
  background: #ddd;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  padding: 10px;
}

#selected-items {
  flex: 1;
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
  font-size: 14px;
  align-content: flex-start;
}

#pay-button {
  display: none;
  margin-top: 5px;
  background: #0078ff;
  color: white;
  border: none;
  border-radius: 8px;
  padding: 10px;
  cursor: pointer;
}

#payment-display {
  position: absolute;
  bottom: 100px;
  left: 0;
  width: 100%;
  text-align: center;
  font-size: 1.2em;
  opacity: 0;
  transition: opacity 0.3s;
}

#card-slot {
  position: absolute;
  bottom: 40px;
  left: 50%;
  transform: translateX(-50%);
  width: 200px;
  height: 20px;
  background: #444;
  border-radius: 5px;
  cursor: pointer;
}

#card-insert {
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%) translateY(0);
  width: 180px;
  height: 100px;
  background: linear-gradient(#888,#555);
  border-radius: 10px;
  transition: transform 1s ease-in-out;
}

#receipt-insert {
  position: absolute;
  bottom: 60px;
  right: 30px;
  width: 100px;
  height: 0;
  background: white;
  border: 1px solid #ccc;
  border-radius: 5px;
  transition: height 1s ease-in-out;
}

.receipt-active {
  height: 100px;
}

#height-controls {
  position: absolute;
  bottom: 80px;
  right: -50px;
  display: flex;
  flex-direction: column;
  gap: 5px;
}

.height-btn {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: #555;
  color: white;
  font-size: 20px;
  border: none;
  cursor: pointer;
  transition: background 0.2s;
}

.height-btn:hover {
  background: #333;
}
</style>
</head>
<body>
<div id="welcome-overlay">
  <div>환영합니다</div>
  <small style="font-size:0.6em;margin-top:10px;">화면을 터치해 시작하세요</small>
</div>

<div class="kiosk" id="kiosk">
  <div class="screen">
    <div class="tiles">
      <div class="tile">아메리카노</div>
      <div class="tile">라떼</div>
      <div class="tile">카푸치노</div>
      <div class="tile">케이크</div>
      <div class="tile">샌드위치</div>
      <div class="tile">주스</div>
    </div>
  </div>
  <div class="bottom">
    <div id="selected-items">선택한 메뉴 없음</div>
    <button id="pay-button">결제하기</button>
  </div>
  <div id="payment-display"></div>
  <div id="card-slot"></div>
  <div id="card-insert"></div>
  <div id="receipt-insert"></div>
  <div id="height-controls">
    <button class="height-btn" id="up-btn">▲</button>
    <button class="height-btn" id="down-btn">▼</button>
  </div>
</div>

<script>
const selectedItems = document.getElementById('selected-items');
const tiles = document.querySelectorAll('.tile');
const payButton = document.getElementById('pay-button');
const cardSlot = document.getElementById('card-slot');
const cardInsert = document.getElementById('card-insert');
const receiptInsert = document.getElementById('receipt-insert');
const paymentDisplay = document.getElementById('payment-display');
const welcomeOverlay = document.getElementById('welcome-overlay');
const kiosk = document.getElementById('kiosk');
const upBtn = document.getElementById('up-btn');
const downBtn = document.getElementById('down-btn');
let cardInserted = false;
let currentY = 0;

// 메뉴 선택
tiles.forEach(tile=>{
  tile.addEventListener('click',()=>{
    if(selectedItems.textContent==="선택한 메뉴 없음") selectedItems.textContent="";
    const tag = document.createElement('div');
    tag.textContent = tile.textContent;
    tag.style.background="#fff";
    tag.style.padding="3px 8px";
    tag.style.borderRadius="6px";
    tag.style.border="1px solid #ccc";
    tag.style.cursor="pointer";

    tag.addEventListener('click', ()=>{
      tag.remove();
      if(selectedItems.children.length === 0) {
        selectedItems.textContent = "선택한 메뉴 없음";
        payButton.style.display='none';
      }
    });

    selectedItems.appendChild(tag);
    payButton.style.display='inline-block';
  });
});

// 결제 버튼 클릭 → 카드 삽입 안내
payButton.addEventListener('click',()=>{
  alert("카드 투입구를 터치하세요!");
});

// 카드 슬롯 클릭 시 결제 진행
cardSlot.addEventListener('click',()=>{
  if(selectedItems.textContent==="선택한 메뉴 없음" || cardInserted) return;
  performPayment();
});

function performPayment(){
  cardInserted = true;
  cardInsert.style.transform = "translateX(-50%) translateY(-110%)";
  paymentDisplay.textContent = "결제 중...";
  paymentDisplay.style.opacity = "1";

  setTimeout(()=>{ paymentDisplay.textContent = "결제 완료!"; },2000);
  setTimeout(()=>{ receiptInsert.classList.add('receipt-active'); },2500);
  setTimeout(()=>{
    paymentDisplay.style.opacity = "0";
    cardInsert.style.transform = "translateX(-50%) translateY(0)";
    setTimeout(()=>{
      receiptInsert.classList.remove('receipt-active');
      receiptInsert.style.height="0";
      selectedItems.textContent = "선택한 메뉴 없음";
      payButton.style.display='none';
      cardInserted = false;
    },4000);
  },6000);
}

// 높이 조절 버튼 기능
upBtn.addEventListener('click',()=>{
  currentY -= 20;
  kiosk.style.transform = `translateY(${currentY}px)`;
});
downBtn.addEventListener('click',()=>{
  currentY += 20;
  kiosk.style.transform = `translateY(${currentY}px)`;
});

// 환영화면 클릭시 시작
welcomeOverlay.addEventListener('click',()=>{ welcomeOverlay.style.display='none'; });
</script>
</body>
</html>
